{"ast":null,"code":"import { mapState } from 'vuex';\nexport default {\n  name: 'ChoosePayment',\n  // data() {\n  // \treturn {\n  // \t}\n  // },\n  computed: { ...mapState({\n      plan_options: state => state.plan_options,\n      plan_selected: state => state.plan_selected\n    }),\n    plan_selected: {\n      get() {\n        return this.$store.state.plan_selected;\n      },\n\n      set(value) {\n        this.$store.commit('updatePlans', value);\n      }\n\n    }\n  },\n  methods: {\n    createOrder: async amount => {\n      // eslint-disable-line no-undef, no-unused-vars\n      // Fetching the data from  your server\n      const title = `Title-${new Date().toUTCString()}`;\n      await fetch(\"http://localhost:4200/create-payment-intent\", {\n        // await fetch(\"https://anddone.giganticdesign.com/create-payment-intent\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          amount: amount,\n          title: title,\n          shortDescription: \"shortDescription\",\n          paymentDescription: \"paymentDescription\",\n          invoiceNumber: \"invoiceNumber-005\",\n          expiresIn: \"3000\",\n          intent: {\n            paymentTypes: [\"DebitCard\", \"CreditCard\", \"ACH\"]\n          }\n        })\n      }).then(res => res.json()).then(res => {\n        let pluginOption = {\n          theme: \"classic\",\n          // classic, modern, minimal, vibrant\n          container: \"mywidget\" // id of the div to render the widget\n\n        }; //Assigning the payment token received from your server\n\n        let paymentIntentToken = res.paymentIntentToken;\n        console.log(`Payment Token: ${paymentIntentToken}`);\n        var myHeaders = new Headers();\n        myHeaders.append(\"x-app-key\", \"KGx1Qnx1\");\n        myHeaders.append(\"x-api-key\", \"jGDhai8dHI4d7AiIE/5LVYw5tK+s7yDKUj9lnRp+OHM=\");\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        var raw = JSON.stringify({\n          \"PaymentToken\": paymentIntentToken,\n          \"Type\": \"PaymentIntent\"\n        });\n        var requestOptions = {\n          method: 'POST',\n          headers: myHeaders,\n          body: raw,\n          redirect: 'follow'\n        };\n        const checkPayment = setInterval(() => {\n          fetch(\"https://api.uat.anddone.com/secure/paymentsdetails\", requestOptions).then(response => response.text()).then(result => console.log(result)).catch(error => console.log('error', error));\n        }, 500); // Initialize the plugin with token and options\n        // eslint-disable-next-line no-undef\n\n        let andDone = new AndDone(paymentIntentToken, pluginOption); // Using onload function to perform some action after the widget is loaded  and ready\n        // eslint-disable-next-line no-unused-vars\n\n        andDone.onload = plugin => {\n          console.log(\"Widget loaded successfully\");\n        };\n      });\n    }\n  },\n\n  mounted() {\n    const plan = this.plan_options.filter(function (opt) {\n      return opt.selected;\n    })[0];\n    this.createOrder(plan.premium.amount);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["mapState","name","computed","plan_options","state","plan_selected","get","$store","set","value","commit","methods","createOrder","amount","title","Date","toUTCString","fetch","method","headers","body","JSON","stringify","shortDescription","paymentDescription","invoiceNumber","expiresIn","intent","paymentTypes","then","res","json","pluginOption","theme","container","paymentIntentToken","console","log","myHeaders","Headers","append","raw","requestOptions","redirect","checkPayment","setInterval","response","text","result","catch","error","andDone","AndDone","onload","plugin","mounted","plan","filter","opt","selected","premium"],"sourceRoot":"","sources":["/Users/lukedavid/Web/newco/src/views/ChoosePayment.vue"],"sourcesContent":["<template>\n\t<Transition appear>\n\t\t\n\t\t<div class=\"questionset card\">\n\t\t\t<h1 class=\"tw-heading text-center\">Payment</h1>\n\t\t\t<div class=\"content\">\n\t\t\t\t<div id=\"mywidget\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</Transition>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\t\n\texport default {\n\t\tname: 'ChoosePayment',\n\t\t// data() {\n\t\t// \treturn {\n\t\t\t\t\t\t\t\n\t\t// \t}\n\t\t// },\n\t\tcomputed: {\n\t\t\t...mapState({\n\t\t\t\tplan_options: state => state.plan_options,\n\t\t\t\tplan_selected: state => state.plan_selected\n\t\t\t}),\n\t\t\tplan_selected: {\n\t\t\t\tget(){\n\t\t\t\t\treturn this.$store.state.plan_selected;\n\t\t\t\t},\n\t\t\t\tset(value){\n\t\t\t\t\tthis.$store.commit('updatePlans', value);\n\t\t\t\t}\n\t\t\t},\n\n\t\t},\n\t\tmethods: {\n\t\t\tcreateOrder: async (amount) => { // eslint-disable-line no-undef, no-unused-vars\n\t\t\t\t// Fetching the data from  your server\n\t\t\t\tconst title = `Title-${ new Date().toUTCString() }`;\n\t\t\t\tawait fetch(\"http://localhost:4200/create-payment-intent\", {\n\t\t\t\t// await fetch(\"https://anddone.giganticdesign.com/create-payment-intent\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\"Content-Type\": \"application/json\"},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tamount: amount,\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\tshortDescription: \"shortDescription\",\n\t\t\t\t\t\tpaymentDescription: \"paymentDescription\",\n\t\t\t\t\t\tinvoiceNumber: \"invoiceNumber-005\",\n\t\t\t\t\t\texpiresIn: \"3000\",\n\t\t\t\t\t\tintent: { \n\t\t\t\t\t\t\tpaymentTypes: [\n\t\t\t\t\t\t\t\t\"DebitCard\",\n\t\t\t\t\t\t\t\t\"CreditCard\",\n\t\t\t\t\t\t\t\t\"ACH\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t}).then(res=> res.json()).then((res) => {\n\t\t\t\t\tlet pluginOption ={\n\t\t\t\t\t\ttheme : \"classic\",  // classic, modern, minimal, vibrant\n\t\t\t\t\t\tcontainer: \"mywidget\",  // id of the div to render the widget\n\t\t\t\t\t}\n\n\t\t\t\t\t//Assigning the payment token received from your server\n\t\t\t\t\tlet paymentIntentToken=res.paymentIntentToken;\n\t\t\t\t\tconsole.log(`Payment Token: ${paymentIntentToken}`);\n\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"x-app-key\", \"KGx1Qnx1\");\n\t\t\t\t\t\tmyHeaders.append(\"x-api-key\", \"jGDhai8dHI4d7AiIE/5LVYw5tK+s7yDKUj9lnRp+OHM=\");\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\n\t\t\t\t\tvar raw = JSON.stringify({\n\t\t\t\t\t\t\"PaymentToken\": paymentIntentToken,\n\t\t\t\t\t\t\"Type\": \"PaymentIntent\"\n\t\t\t\t\t});\n\n\t\t\t\t\tvar requestOptions = {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: myHeaders,\n\t\t\t\t\t\tbody: raw,\n\t\t\t\t\t\tredirect: 'follow'\n\t\t\t\t\t};\n\n\t\t\t\t\tconst checkPayment = setInterval(() => {\n\t\t\t\t\t\tfetch(\"https://api.uat.anddone.com/secure/paymentsdetails\", requestOptions)\n\t\t\t\t\t\t.then(response => response.text())\n\t\t\t\t\t\t.then(result => console.log(result))\n\t\t\t\t\t\t.catch(error => console.log('error', error));\n\t\t\t\t\t}, 500);\n\t\t\t\t\t// Initialize the plugin with token and options\n\n\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\tlet andDone = new AndDone(paymentIntentToken, pluginOption); \n\n\n\n\t\t\t\t\t// Using onload function to perform some action after the widget is loaded  and ready\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tandDone.onload = (plugin) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(\"Widget loaded successfully\");\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tconst plan = this.plan_options.filter(function(opt){\n\t\t\t\treturn opt.selected;\n\t\t\t})[0]\n\t\t\tthis.createOrder(plan.premium.amount);\n\t\t}\n\t}\n</script>"]},"metadata":{},"sourceType":"module"}